<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾·å·æ‰‘å…‹ç»ƒä¹ æ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .game-table {
            background: radial-gradient(ellipse at center, #2d5a27 0%, #1e3d1a 100%);
            border-radius: 200px;
            padding: 60px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5), inset 0 0 100px rgba(0,0,0,0.3);
            border: 15px solid #4a2c18;
            margin-bottom: 30px;
        }

        .community-cards {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            min-height: 120px;
        }

        .card {
            width: 80px;
            height: 112px;
            background: linear-gradient(145deg, #fff 0%, #f0f0f0 100%);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            position: relative;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }

        .card.red {
            color: #e74c3c;
        }

        .card.black {
            color: #2c3e50;
        }

        .card-suit {
            font-size: 32px;
        }

        .card-rank {
            font-size: 28px;
        }

        .card-back {
            background: linear-gradient(135deg, #c0392b 0%, #e74c3c 50%, #c0392b 100%);
            background-size: 20px 20px;
        }

        .card-back::before {
            content: 'ğŸ‚ ';
            font-size: 60px;
            color: #fff;
            opacity: 0.3;
        }

        .pot {
            text-align: center;
            font-size: 1.5em;
            margin: 20px 0;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .players {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .player {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid rgba(255,255,255,0.1);
        }

        .player.active {
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255,215,0,0.3);
        }

        .player-name {
            font-size: 1.2em;
            margin-bottom: 10px;
            color: #ffd700;
        }

        .player-chips {
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .player-cards {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
        }

        .btn-deal {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #1a1a2e;
        }

        .btn-fold {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .btn-call {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }

        .btn-raise {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
        }

        .btn-check {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .message {
            text-align: center;
            font-size: 1.3em;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            min-height: 50px;
        }

        .hand-rank {
            text-align: center;
            font-size: 1.2em;
            margin: 15px 0;
            color: #2ecc71;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .card {
                width: 60px;
                height: 84px;
                font-size: 18px;
            }

            .card-suit {
                font-size: 24px;
            }

            .card-rank {
                font-size: 20px;
            }

            .players {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸƒ å¾·å·æ‰‘å…‹ç»ƒä¹ æ¸¸æˆ ğŸƒ</h1>

        <div class="game-table">
            <div class="pot">
                åº•æ± : <span id="pot-amount">0</span> ç­¹ç 
            </div>

            <div class="community-cards" id="community-cards">
                <div class="card card-back"></div>
                <div class="card card-back"></div>
                <div class="card card-back"></div>
                <div class="card card-back"></div>
                <div class="card card-back"></div>
            </div>

            <div class="hand-rank" id="hand-rank"></div>
            <div class="message" id="message">ç‚¹å‡»"å‘ç‰Œ"å¼€å§‹æ¸¸æˆ</div>
        </div>

        <div class="players">
            <div class="player" id="player1">
                <div class="player-name">ğŸ‘¤ ç©å®¶ (ä½ )</div>
                <div class="player-chips">ç­¹ç : <span id="chips1">1000</span></div>
                <div class="player-cards" id="player1-cards"></div>
            </div>

            <div class="player" id="player2">
                <div class="player-name">ğŸ¤– ç”µè„‘ç©å®¶</div>
                <div class="player-chips">ç­¹ç : <span id="chips2">1000</span></div>
                <div class="player-cards" id="player2-cards"></div>
            </div>
        </div>

        <div class="controls">
            <button class="btn-deal" onclick="dealCards()">ğŸ´ å‘ç‰Œ</button>
            <button class="btn-check" onclick="check()" disabled id="btn-check">âœ‹ è¿‡ç‰Œ</button>
            <button class="btn-call" onclick="call()" disabled id="btn-call">ğŸ“ è·Ÿæ³¨</button>
            <button class="btn-raise" onclick="raise()" disabled id="btn-raise">â¬†ï¸ åŠ æ³¨</button>
            <button class="btn-fold" onclick="fold()" disabled id="btn-fold">âŒ å¼ƒç‰Œ</button>
        </div>
    </div>

    <script>
        const suits = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
        const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
        const rankValues = {'2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '10': 10, 'J': 11, 'Q': 12, 'K': 13, 'A': 14};

        let deck = [];
        let player1Cards = [];
        let player2Cards = [];
        let communityCards = [];
        let pot = 0;
        let player1Chips = 1000;
        let player2Chips = 1000;
        let currentBet = 0;
        let gamePhase = 'idle'; // idle, preflop, flop, turn, river, showdown

        function createDeck() {
            deck = [];
            for (let suit of suits) {
                for (let rank of ranks) {
                    deck.push({ suit, rank, value: rankValues[rank] });
                }
            }
            shuffleDeck();
        }

        function shuffleDeck() {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        function dealCards() {
            createDeck();
            player1Cards = [deck.pop(), deck.pop()];
            player2Cards = [deck.pop(), deck.pop()];
            communityCards = [];
            pot = 50;
            player1Chips -= 25;
            player2Chips -= 25;
            currentBet = 0;
            gamePhase = 'preflop';

            updateDisplay();
            showMessage('æ¸¸æˆå¼€å§‹ï¼æ¯äººåº•æ³¨25ç­¹ç ');
            enableGameButtons();
            updateHandRank();
        }

        function dealCommunityCards(count) {
            for (let i = 0; i < count; i++) {
                communityCards.push(deck.pop());
            }
        }

        function check() {
            if (currentBet > 0) {
                showMessage('å½“å‰æœ‰æ³¨ï¼Œä¸èƒ½è¿‡ç‰Œï¼');
                return;
            }
            nextPhase();
        }

        function call() {
            const callAmount = currentBet;
            if (callAmount > player1Chips) {
                showMessage('ç­¹ç ä¸è¶³ï¼');
                return;
            }
            player1Chips -= callAmount;
            pot += callAmount;
            currentBet = 0;
            showMessage(`ä½ è·Ÿæ³¨äº† ${callAmount} ç­¹ç `);
            updateDisplay();
            nextPhase();
        }

        function raise() {
            const raiseAmount = 50;
            if (raiseAmount > player1Chips) {
                showMessage('ç­¹ç ä¸è¶³ï¼');
                return;
            }
            player1Chips -= raiseAmount;
            pot += raiseAmount;
            currentBet += raiseAmount;
            showMessage(`ä½ åŠ æ³¨äº† ${raiseAmount} ç­¹ç `);
            updateDisplay();
            computerAction();
        }

        function fold() {
            showMessage('ä½ å¼ƒç‰Œäº†ï¼Œç”µè„‘èµ¢å¾—åº•æ± ');
            player2Chips += pot;
            pot = 0;
            gamePhase = 'idle';
            updateDisplay();
            disableGameButtons();
        }

        function computerAction() {
            // ç®€å•çš„AIé€»è¾‘
            const random = Math.random();
            if (random < 0.3) {
                // ç”µè„‘å¼ƒç‰Œ
                showMessage('ç”µè„‘å¼ƒç‰Œï¼Œä½ èµ¢å¾—åº•æ± ï¼');
                player1Chips += pot;
                pot = 0;
                gamePhase = 'idle';
                disableGameButtons();
            } else if (random < 0.7) {
                // ç”µè„‘è·Ÿæ³¨
                const callAmount = Math.min(currentBet, player2Chips);
                player2Chips -= callAmount;
                pot += callAmount;
                currentBet = 0;
                showMessage('ç”µè„‘è·Ÿæ³¨');
                updateDisplay();
                nextPhase();
            } else {
                // ç”µè„‘åŠ æ³¨
                const raiseAmount = 50;
                if (raiseAmount <= player2Chips) {
                    player2Chips -= raiseAmount;
                    pot += raiseAmount;
                    currentBet += raiseAmount;
                    showMessage('ç”µè„‘åŠ æ³¨50ç­¹ç ');
                    updateDisplay();
                } else {
                    nextPhase();
                }
            }
            updateDisplay();
        }

        function nextPhase() {
            switch (gamePhase) {
                case 'preflop':
                    dealCommunityCards(3);
                    gamePhase = 'flop';
                    showMessage('ç¿»ç‰Œåœˆï¼');
                    break;
                case 'flop':
                    dealCommunityCards(1);
                    gamePhase = 'turn';
                    showMessage('è½¬ç‰Œåœˆï¼');
                    break;
                case 'turn':
                    dealCommunityCards(1);
                    gamePhase = 'river';
                    showMessage('æ²³ç‰Œåœˆï¼');
                    break;
                case 'river':
                    showdown();
                    return;
            }
            updateDisplay();
            updateHandRank();
        }

        function showdown() {
            gamePhase = 'showdown';
            const player1Hand = evaluateHand([...player1Cards, ...communityCards]);
            const player2Hand = evaluateHand([...player2Cards, ...communityCards]);

            let result;
            if (player1Hand.rank > player2Hand.rank) {
                result = 'ä½ èµ¢äº†ï¼';
                player1Chips += pot;
            } else if (player1Hand.rank < player2Hand.rank) {
                result = 'ç”µè„‘èµ¢äº†ï¼';
                player2Chips += pot;
            } else {
                // æ¯”è¾ƒé«˜ç‰Œ
                const comparison = compareHighCards(player1Hand.values, player2Hand.values);
                if (comparison > 0) {
                    result = 'ä½ èµ¢äº†ï¼ï¼ˆé«˜ç‰Œèƒœï¼‰';
                    player1Chips += pot;
                } else if (comparison < 0) {
                    result = 'ç”µè„‘èµ¢äº†ï¼ï¼ˆé«˜ç‰Œèƒœï¼‰';
                    player2Chips += pot;
                } else {
                    result = 'å¹³å±€ï¼å¹³åˆ†åº•æ± ';
                    player1Chips += pot / 2;
                    player2Chips += pot / 2;
                }
            }

            pot = 0;
            showMessage(`${result}\nä½ çš„ç‰Œå‹ï¼š${player1Hand.name}\nç”µè„‘ç‰Œå‹ï¼š${player2Hand.name}`);
            disableGameButtons();
            updateDisplay();
        }

        function evaluateHand(cards) {
            const values = cards.map(c => c.value).sort((a, b) => b - a);
            const suits = cards.map(c => c.suit);
            const valueCounts = {};
            values.forEach(v => valueCounts[v] = (valueCounts[v] || 0) + 1);
            const counts = Object.values(valueCounts).sort((a, b) => b - a);
            const isFlush = suits.every(s => s === suits[0]);
            const uniqueValues = [...new Set(values)].sort((a, b) => b - a);
            const isStraight = uniqueValues.length >= 5 && checkStraight(uniqueValues);

            if (isFlush && isStraight) return { rank: 9, name: 'åŒèŠ±é¡º', values };
            if (counts[0] === 4) return { rank: 8, name: 'å››æ¡', values };
            if (counts[0] === 3 && counts[1] === 2) return { rank: 7, name: 'è‘«èŠ¦', values };
            if (isFlush) return { rank: 6, name: 'åŒèŠ±', values };
            if (isStraight) return { rank: 5, name: 'é¡ºå­', values };
            if (counts[0] === 3) return { rank: 4, name: 'ä¸‰æ¡', values };
            if (counts[0] === 2 && counts[1] === 2) return { rank: 3, name: 'ä¸¤å¯¹', values };
            if (counts[0] === 2) return { rank: 2, name: 'ä¸€å¯¹', values };
            return { rank: 1, name: 'é«˜ç‰Œ', values };
        }

        function checkStraight(values) {
            for (let i = 0; i < values.length - 4; i++) {
                if (values[i] - values[i + 4] === 4) return true;
            }
            // æ£€æŸ¥A2345
            if (values.includes(14) && values.includes(2) && values.includes(3) && values.includes(4) && values.includes(5)) {
                return true;
            }
            return false;
        }

        function compareHighCards(values1, values2) {
            for (let i = 0; i < Math.min(values1.length, values2.length); i++) {
                if (values1[i] > values2[i]) return 1;
                if (values1[i] < values2[i]) return -1;
            }
            return 0;
        }

        function updateHandRank() {
            if (player1Cards.length === 0) {
                document.getElementById('hand-rank').textContent = '';
                return;
            }
            const hand = evaluateHand([...player1Cards, ...communityCards]);
            document.getElementById('hand-rank').textContent = `å½“å‰ç‰Œå‹: ${hand.name}`;
        }

        function createCardElement(card, faceDown = false) {
            const div = document.createElement('div');
            div.className = 'card';

            if (faceDown) {
                div.classList.add('card-back');
                return div;
            }

            const isRed = card.suit === 'â™¥' || card.suit === 'â™¦';
            div.classList.add(isRed ? 'red' : 'black');

            div.innerHTML = `
                <span class="card-rank">${card.rank}</span>
                <span class="card-suit">${card.suit}</span>
            `;

            return div;
        }

        function updateDisplay() {
            document.getElementById('pot-amount').textContent = pot;
            document.getElementById('chips1').textContent = player1Chips;
            document.getElementById('chips2').textContent = player2Chips;

            const player1CardsDiv = document.getElementById('player1-cards');
            const player2CardsDiv = document.getElementById('player2-cards');
            const communityCardsDiv = document.getElementById('community-cards');

            player1CardsDiv.innerHTML = '';
            player2CardsDiv.innerHTML = '';
            communityCardsDiv.innerHTML = '';

            player1Cards.forEach(card => {
                player1CardsDiv.appendChild(createCardElement(card));
            });

            const showPlayer2Cards = gamePhase === 'showdown';
            player2Cards.forEach(card => {
                player2CardsDiv.appendChild(createCardElement(card, !showPlayer2Cards));
            });

            for (let i = 0; i < 5; i++) {
                if (i < communityCards.length) {
                    communityCardsDiv.appendChild(createCardElement(communityCards[i]));
                } else {
                    const backCard = document.createElement('div');
                    backCard.className = 'card card-back';
                    communityCardsDiv.appendChild(backCard);
                }
            }

            document.getElementById('player1').classList.toggle('active', gamePhase !== 'idle' && gamePhase !== 'showdown');
            document.getElementById('player2').classList.toggle('active', false);
        }

        function showMessage(msg) {
            document.getElementById('message').textContent = msg;
        }

        function enableGameButtons() {
            document.getElementById('btn-check').disabled = false;
            document.getElementById('btn-call').disabled = false;
            document.getElementById('btn-raise').disabled = false;
            document.getElementById('btn-fold').disabled = false;
        }

        function disableGameButtons() {
            document.getElementById('btn-check').disabled = true;
            document.getElementById('btn-call').disabled = true;
            document.getElementById('btn-raise').disabled = true;
            document.getElementById('btn-fold').disabled = true;
        }

        // åˆå§‹åŒ–æ˜¾ç¤º
        updateDisplay();
    </script>
</body>
</html>